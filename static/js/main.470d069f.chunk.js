(window.webpackJsonpcounterplus=window.webpackJsonpcounterplus||[]).push([[0],{126:function(e,t,n){e.exports=n(190)},131:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(6),o=n.n(r),i=(n(131),n(15)),l=n(24),c=n(26),d=n(25),p=n(22),u=n(27),h=n(218),m=n(191),v=n(28),f=n(219),g=n(220),w=n(217),E=n(194),b=n(223),y=n(226),R=n(234),S=n(237),j=n(227),x=n(236),C=n(221),O=n(222),k=n(224),I=n(225),W=n(107),z=n.n(W),P=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={p1:{score:0,set:0},p2:{score:0,set:0},leftServes:!0,posReversed:!1},n.manager=n.props.manager,n.manager.updateContentInterface=function(e,t,a,s){n.setState({p1:{score:e.score,set:e.set},p2:{score:t.score,set:t.set},leftServes:a,posReversed:s})},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,n=this,a=(e=this.state.posReversed,t=this.props.initialPosReversed,!e&&!t||e&&t?[!0,!1]:[!1,!0]).map((function(e){return s.a.createElement(N,{scoreData:e?n.state.p1:n.state.p2,onPositiveSwipe:function(){n.props.swipeReversed?n.manager.minusScore(e):n.manager.addScore(e)},onNegativeSwipe:function(){n.props.swipeReversed?n.manager.addScore(e):n.manager.minusScore(e)},serveIndicate:e?n.state.leftServes:!n.state.leftServes})}));return s.a.createElement("div",{style:{display:"flex",flexDirection:"col",alignItems:"center",justifyContent:"center"}},a)}}]),t}(a.Component),N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).offset=0,e.onStartSwipe=function(t,n){e.offset=n.y},e.onFinishSwipe=function(t,n){var a=n.y-e.offset;a>100?e.props.onPositiveSwipe():a<-100&&e.props.onNegativeSwipe()},e.state={windowHeight:window.innerHeight,windowWidth:window.innerWidth},e.handleResize=e.handleResize.bind(Object(p.a)(e)),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.addEventListener("resize",null)}},{key:"handleResize",value:function(e,t){this.setState({windowHeight:window.innerHeight,windowWidth:window.innerWidth})}},{key:"render",value:function(){var e={width:"50vw",fontSize:"100",height:this.state.windowHeight};return s.a.createElement(z.a,{axis:"none",handle:".handle",defaultPosition:{x:0,y:0},position:null,grid:[25,25],scale:1,onStart:this.onStartSwipe,onDrag:this.handleDrag,onStop:this.onFinishSwipe},s.a.createElement("div",null,s.a.createElement("div",{className:"handle",style:e},s.a.createElement(w.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},s.a.createElement(w.a,{item:!0,xs:12},s.a.createElement("div",null,s.a.createElement("div",{style:{textAlign:"center",marginTop:-70}},s.a.createElement("h1",{style:{color:"#fff",fontSize:Math.min(.45*this.state.windowHeight,.45*this.state.windowWidth),userSelect:"none",margin:0,marginBottom:"0",padding:0}},this.props.scoreData.score),s.a.createElement("h2",{style:{color:"#fff",fontSize:Math.min(.1*this.state.windowHeight,.2*this.state.windowWidth),userSelect:"none",margin:0}},this.props.scoreData.set)),s.a.createElement("hr",{size:"8",style:{border:0,width:Math.min(.5*this.state.windowHeight,.45*this.state.windowWidth)},color:this.props.serveIndicate?"#ff2477":"transparent"})))))))}}]),t}(a.Component),L=P,D=n(235),H=n(118),T=n(238),B=function(e,t){return(e||t)&&!(e&&t)},A=function e(t,n,a,s){Object(i.a)(this,e),this.p1=t.score,this.p2=n.score,this.p1set=t.set,this.p2set=n.set,this.servReversed=a,this.posReversed=s},F=function e(){Object(i.a)(this,e),this.score=0,this.set=0},M=function e(){var t=this;Object(i.a)(this,e),this.addScore=function(e){t.isSetFinished()?t.proceedNextSet():t.changeScore(e,!0)},this.minusScore=function(e){e&&t.p1.score<1||!e&&t.p2.score<1||t.changeScore(e,!1)},this.changeScore=function(e,n){e?t.p1.score+=n?1:-1:t.p2.score+=n?1:-1,t.changeServReversed(),t.pushHistory(),t.updateInterface()},this.updateInterface=function(){t.updateContentInterface(t.p1,t.p2,t.leftServes(),t.isPosReversed()),t.updateBarInterface(t.logIncludes(t.logIndex+1),t.logIncludes(t.logIndex-1))},this.proceedNextSet=function(){var e=t.p1.score>t.p2.score;t.p1.score=0,t.p2.score=0,e?t.p1.set+=1:t.p2.set+=1,t.posReversed=(t.p1.set+t.p2.set)%2===1,t.changeServReversed(),t.pushHistory(),t.updateInterface()},this.changeServReversed=function(){t.isDeuce()?t.servReversed=B((t.p1.score+t.p2.score)%2===0,!t.primServReversed):t.servReversed=B(Math.floor((t.p1.score+t.p2.score)/2)%2===0,!t.primServReversed)},this.undo=function(){t.logIncludes(t.logIndex-1)&&(t.logIndex--,t.restoreFromLog(t.logIndex))},this.redo=function(){t.logIncludes(t.logIndex+1)&&(t.logIndex++,t.restoreFromLog(t.logIndex))},this.pushHistory=function(){var e=new A(t.p1,t.p2,t.servReversed,t.posReversed);t.log.length===t.logIndex+1?t.log.push(e):t.log.length>t.logIndex+1?(t.log=t.log.slice(0,t.logIndex+1),t.log.push(e)):console.log("unknown issue occured"),t.logIndex++},this.restoreFromLog=function(e){var n=t.log[e];t.p1.score=n.p1,t.p2.score=n.p2,t.p1.set=n.p1set,t.p2.set=n.p2set,t.servReversed=n.servReversed,t.posReversed=n.posReversed,t.updateInterface()},this.reset=function(){t.p1=new F,t.p2=new F,t.servReversed=!1,t.posReversed=!1,t.log=[new A(t.p1,t.p2,t.servReversed,t.posReversed)],t.logIndex=0,t.updateInterface()},this.result=function(){var e=[];if(t.log.length<1)return[{p1score:0,p2score:0,p1set:0,p2set:0}];for(var n=1;n<t.log.length;n++){var a=t.log[n];if(t.isSetFinished(a.p1,a.p2)){var s={p1score:a.p1,p2score:a.p2,p1set:a.p1set+a.p1>a.p2?1:0,p2set:a.p2set+a.p1<a.p2?1:0};e.push(s)}}var r=t.log[t.log.length-1];if(!t.isSetFinished(r.p1,r.p2)){var o={p1score:r.p1,p2score:r.p2,p1set:r.p1set,p2set:r.p2set};e.push(o)}return e},this.isDeuce=function(){return t.p1.score>9&&t.p2.score>9},this.isSetFinished=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.p1.score,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.p2.score;return Math.abs(e-n)>1&&(e>10||n>10)},this.isPosReversed=function(){return B(t.posReversed,t.primServReversed)},this.leftServes=function(){return!B(t.posReversed,t.servReversed)},this.logIncludes=function(e){return e>-1&&e<t.log.length},this.p1=new F,this.p2=new F,this.servReversed=!1,this.posReversed=!1,this.log=[new A(this.p1,this.p2,this.servReversed,this.posReversed)],this.logIndex=0},U=n(110),G=n.n(U),J=n(109),$=Object(h.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}})),q=Object(H.a)({type:"light",palette:{primary:{light:"#000000",main:"#364150",contrastText:"#fff"},secondary:{light:"#000000",main:"#C2BDCE",contrastText:"#fff"},error:{light:"#000000",main:"#2b2133",contrastText:"#fff"}}}),K=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClick=function(e){n.setState({anchorEl:e.currentTarget})},n.handleClose=function(){n.setState({anchorEl:null})},n.classes=e.classes,n.state={windowWidth:window.innerWidth,redoEnabled:!1,undoEnabled:!1,posReversed:!1,swipeReversed:!1,anchorEl:null,setAnchorEl:null},n.manager=new M,n.manager.updateBarInterface=function(e,t){n.setState({redoEnabled:e,undoEnabled:t})},n.handleResize=n.handleResize.bind(Object(p.a)(n)),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.addEventListener("resize",null)}},{key:"handleResize",value:function(e,t){window.scrollTo(0,0),this.setState({windowWidth:window.innerWidth})}},{key:"render",value:function(){var e,t,n=this,a=s.a.createElement(w.a,{item:!0},s.a.createElement("div",null,s.a.createElement(C.a,{value:"posReversed",selected:this.state.posReversed,onChange:function(){n.setState({posReversed:!n.state.posReversed})},style:{border:0,bordeRadius:"50"}},s.a.createElement(O.a,{color:this.state.posReversed?"secondary":"error"})),s.a.createElement(b.a,{"aria-label":"undo",disabled:!this.state.undoEnabled,className:this.classes.margin,onClick:function(){n.manager.undo()}},s.a.createElement(k.a,{color:this.state.undoEnabled?"secondary":"error"})),s.a.createElement(b.a,{"aria-label":"redo",disabled:!this.state.redoEnabled,className:this.classes.margin,onClick:function(){n.manager.redo()}},s.a.createElement(I.a,{color:this.state.redoEnabled?"secondary":"error"})),s.a.createElement(y.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:this.handleClick},s.a.createElement(G.a,{color:"secondary"})),s.a.createElement(R.a,{id:"simple-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:this.handleClose},s.a.createElement(S.a,{onClick:function(){window.confirm("\u73fe\u5728\u306e\u30b9\u30b3\u30a2\u3092\u30ea\u30bb\u30c3\u30c8\u3057\u3066\u3082\u826f\u3044\u3067\u3059\u304b\uff1f")&&n.manager.reset(),n.handleClose()}},"\u30ea\u30bb\u30c3\u30c8"),s.a.createElement(S.a,{onClick:function(){var e=n.manager.result();n.props.history.push({pathname:"/CounterPlus/result",state:{result:e}})}},s.a.createElement("div",{style:{textAlign:"center"}},"\u5bfe\u6226\u7d50\u679c\u3092\u898b\u308b")),s.a.createElement(S.a,null,s.a.createElement(j.a,{value:"swipeReversed",control:s.a.createElement(x.a,{color:"primary",onChange:function(e){n.setState({swipeReversed:!n.state.swipeReversed}),n.handleClose()},checked:this.state.swipeReversed}),label:"\u30b9\u30ef\u30a4\u30d7\u306e\u5411\u304d\u3092\u9006\u306b\u3059\u308b",labelPlacement:"start",style:{marginLeft:0}})))));return s.a.createElement("div",{className:this.classes.root},s.a.createElement(J.Helmet,null,s.a.createElement("meta",{name:"apple-mobile-web-app-title",content:"CounterPlus"}),s.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),s.a.createElement("title",null,"CounterPlus")),s.a.createElement(D.a,null,s.a.createElement(T.a,{theme:q},(e=function(e,t){return s.a.createElement(w.a,{item:!0},s.a.createElement(E.a,{variant:"h6",className:n.classes.title},s.a.createElement("img",{src:"https://i.imgur.com/WLv1TO2.png",alt:"CounterPlus",height:e,style:{position:"absolute",top:"50%",left:{transform:t},transform:"translate(0%, -50%)"}})))},t=a,n.state.windowWidth>450?s.a.createElement(f.a,{position:"fixed",color:"primary",style:{boxShadow:"none"}},s.a.createElement(g.a,null,s.a.createElement(w.a,{justify:"space-between",container:!0},e("20vw","0%"),t))):n.state.windowWidth>370?s.a.createElement(f.a,{position:"fixed",color:"primary",style:{boxShadow:"none"}},s.a.createElement(g.a,null,s.a.createElement(w.a,{justify:"space-between",container:!0},e("12vw","0%"),t))):s.a.createElement(f.a,{position:"fixed",color:"primary",style:{boxShadow:"none"}},s.a.createElement(g.a,null,s.a.createElement(w.a,{justify:"space-between",container:!0},e("8vw","0%"),t))))),s.a.createElement("div",{style:{backgroundColor:"#364150"}},s.a.createElement(L,{manager:this.manager,initialPosReversed:this.state.posReversed,swipeReversed:this.state.swipeReversed}))))}}]),t}(a.Component),Q=Object(v.e)(Object(m.a)($)(K)),V=n(85),X=n(228),Y=n(229),Z=n(230),_=n(231),ee=n(232),te=n(233),ne=Object(h.a)((function(e){var t;return t={root:{flexGrow:1},title:{flexGrow:1},card:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"}},Object(V.a)(t,"title",{fontSize:14}),Object(V.a)(t,"pos",{marginBottom:12}),t})),ae=Object(H.a)({type:"light",palette:{primary:{light:"#000000",main:"#364150",contrastText:"#fff"},secondary:{light:"#000000",main:"#C2BDCE",contrastText:"#fff"},error:{light:"#000000",main:"#2b2133",contrastText:"#fff"}}}),se=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).props.location&&n.props.location.state||n.props.history.push({pathname:"/"}),n.classes=e.classes,n.state={windowWidth:window.innerWidth},n.handleResize=n.handleResize.bind(Object(p.a)(n)),console.log(n.props.location.state),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.addEventListener("resize",null)}},{key:"handleResize",value:function(e,t){this.setState({windowWidth:window.innerWidth})}},{key:"render",value:function(){var e=this,t=s.a.createElement("div",null,s.a.createElement("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),s.a.createElement("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),s.a.createElement(T.a,{theme:ae},s.a.createElement(f.a,{position:"static",color:"primary"},s.a.createElement(g.a,null,s.a.createElement(w.a,{justify:"space-between",container:!0},s.a.createElement(w.a,{item:!0},s.a.createElement(b.a,{"aria-label":"undo",className:this.classes.margin,onClick:function(){e.props.history.push({pathname:"/"})}},s.a.createElement(k.a,{color:"secondary"}))),s.a.createElement(w.a,{item:!0},s.a.createElement("img",{src:"https://i.imgur.com/WLv1TO2.png",alt:"CounterPlus",height:"20vw",style:{position:"absolute",top:"50%",transform:"translate(-100%, -50%)"}})))))),s.a.createElement("div",{style:{backgroundColor:"#364150"}}));return s.a.createElement("div",{className:this.classes.root},t,s.a.createElement(re,{data:this.props.location.state.result,classes:this.classes}))}}]),t}(a.Component),re=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).subResStr=function(){var e=n.data.map((function(e){return e.p1score+" - "+e.p2score})),t="(",a=!0,s=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){t+=o.value+", "}}catch(l){s=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return t=t.slice(0,t.length-2),t+=")"},n.data=n.props.data,n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.data[this.data.length-1],t=this.data.map((function(e){return s.a.createElement(E.a,{variant:"h4",component:"p"},e.p1score," - ",e.p2score)}));return s.a.createElement("div",null,s.a.createElement(X.a,{className:this.props.classes.card,style:{margin:50}},s.a.createElement(Y.a,null,s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(E.a,{className:this.props.classes.title,color:"textSecondary",gutterBottom:!0},"\u5bfe\u6226\u7d50\u679c"),s.a.createElement(E.a,{variant:"h1",component:"h1"},e.p1set," - ",e.p2set),s.a.createElement(E.a,{className:this.props.classes.pos,variant:"h5",color:"textSecondary",style:{padding:15}},"\u5404\u30bb\u30c3\u30c8 \u30b9\u30b3\u30a2"),t))),s.a.createElement(w.a,{justify:"flex-end",container:!0},s.a.createElement(Z.a,{url:"https://caprolactam2450.github.io/CounterPlus/"},s.a.createElement(_.a,{round:!0})),s.a.createElement(ee.a,{url:"https://caprolactam2450.github.io/CounterPlus/",title:"\u8a66\u5408\u306e\u7d50\u679c\n"+e.p1set+" - "+e.p2set+this.subResStr()+"\n",via:"CounterPlus",style:{paddingLeft:10,paddingRight:20}},s.a.createElement(te.a,{round:!0}))))}}]),t}(a.Component),oe=Object(v.e)(Object(m.a)(ne)(se)),ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function le(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ce=n(57);o.a.render(s.a.createElement((function(){return s.a.createElement(ce.a,null,s.a.createElement("div",null,s.a.createElement(v.a,{exact:!0,path:"/",component:Q}),s.a.createElement(v.a,{exact:!0,path:"/CounterPlus/",component:Q}),s.a.createElement(v.a,{path:"/CounterPlus/result",component:oe})))}),null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/CounterPlus",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/CounterPlus","/service-worker.js");ie?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):le(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):le(t,e)}))}}()}},[[126,1,2]]]);
//# sourceMappingURL=main.470d069f.chunk.js.map